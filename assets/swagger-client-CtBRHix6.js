var Qt=Object.defineProperty;var tt=e=>{throw TypeError(e)};var Xt=(e,t,r)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var M=(e,t,r)=>Xt(e,typeof t!="symbol"?t+"":t,r),rt=(e,t,r)=>t.has(e)||tt("Cannot "+r);var xe=(e,t,r)=>(rt(e,t,"read from private field"),r?r.call(e):t.get(e)),nt=(e,t,r)=>t.has(e)?tt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ae=(e,t,r,n)=>(rt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{i as mt,r as U,A as We,O as ge,s as A,a as ne,d as Zt,c as _t,k as ee,g as Q,p as qt,b as er,e as tr,f as rr,h as nr,j as sr,H as or,R as ir,P as we,l as L,m as oe,n as gt,o as wt,q as se,t as bt,u as vt,v as $e,w as ar,I as cr,x as Pt,y as lr,z as B,B as K,C as q,D as st,E as ur,F as fr,G,M as Se,J as dr,K as pr,L as D,N as ae,Q as hr,S as ot,T as it,U as ce,V as yr,W as mr,X as V,Y as gr,Z as wr,_ as br,$ as at,a0 as vr,a1 as Pr,a2 as Or,a3 as xr,a4 as Ar,a5 as Sr,a6 as ke,a7 as ue,a8 as Rr,a9 as ct,aa as Tr,ab as Cr,ac as Mr,ad as Er,ae as jr,af as Ir,ag as $r,ah as kr}from"./@swagger-api-D-K6QVBf.js";import{j as X,J as De}from"./js-yaml-C700HjKD.js";import{R as Re,O as Dr}from"./minim-DmaY3VYh.js";import{i as Ur}from"./@babel-Bdh_LiN5.js";import{c as Nr}from"./cookie-RatnibW6.js";import{i as Ot}from"./is-plain-object-C7BF5Ngm.js";import{r as Ue}from"./openapi-path-templating-TVv5bcRi.js";import{m as Fr}from"./ramda-adjunct-BCvQVQox.js";import{q as Ne}from"./qs-DpWK4bSa.js";import{a as _,g as Br}from"./fast-json-patch-2Vrxhmch.js";import{d as zr}from"./deepmerge-BvKKqndz.js";import{t as Vr}from"./traverse-BZ_wD4qx.js";const S={add:Hr,replace:fe,remove:Jr,merge:Wr,mergeDeep:Kr,context:Gr,getIn:Zr,applyPatch:Lr,parentPathMatch:Xr,flatten:ie,fullyNormalizeArray:_r,normalizeArray:At,isPromise:qr,forEachNew:Yr,forEachNewPrimitive:Qr,isJsonPatch:Tt,isContextPatch:rn,isPatch:be,isMutation:Ct,isAdditiveMutation:pe,isGenerator:tn,isFunction:Rt,isObject:W,isError:en};function Lr(e,t,r){if(r=r||{},t={...t,path:t.path&&lt(t.path)},t.op==="merge"){const n=Te(e,t.path);Object.assign(n,t.value),_(e,[fe(t.path,n)])}else if(t.op==="mergeDeep"){const n=Te(e,t.path),s=zr(n,t.value);e=_(e,[fe(t.path,s)]).newDocument}else if(t.op==="add"&&t.path===""&&W(t.value)){const n=Object.keys(t.value).reduce((s,o)=>(s.push({op:"add",path:`/${lt(o)}`,value:t.value[o]}),s),[]);_(e,n)}else if(t.op==="replace"&&t.path===""){let{value:n}=t;r.allowMetaPatches&&t.meta&&pe(t)&&(Array.isArray(t.value)||W(t.value))&&(n={...n,...t.meta}),e=n}else if(_(e,[t]),r.allowMetaPatches&&t.meta&&pe(t)&&(Array.isArray(t.value)||W(t.value))){const s={...Te(e,t.path),...t.meta};_(e,[fe(t.path,s)])}return e}function lt(e){return Array.isArray(e)?e.length<1?"":`/${e.map(t=>(t+"").replace(/~/g,"~0").replace(/\//g,"~1")).join("/")}`:e}function Hr(e,t){return{op:"add",path:e,value:t}}function fe(e,t,r){return{op:"replace",path:e,value:t,meta:r}}function Jr(e){return{op:"remove",path:e}}function Wr(e,t){return{type:"mutation",op:"merge",path:e,value:t}}function Kr(e,t){return{type:"mutation",op:"mergeDeep",path:e,value:t}}function Gr(e,t){return{type:"context",path:e,value:t}}function Yr(e,t){try{return xt(e,Be,t)}catch(r){return r}}function Qr(e,t){try{return xt(e,Fe,t)}catch(r){return r}}function xt(e,t,r){const n=e.filter(pe).map(a=>t(a.value,r,a.path))||[],s=ie(n);return St(s)}function Fe(e,t,r){return r=r||[],Array.isArray(e)?e.map((n,s)=>Fe(n,t,r.concat(s))):W(e)?Object.keys(e).map(n=>Fe(e[n],t,r.concat(n))):t(e,r[r.length-1],r)}function Be(e,t,r){r=r||[];let n=[];if(r.length>0){const s=t(e,r[r.length-1],r);s&&(n=n.concat(s))}if(Array.isArray(e)){const s=e.map((o,a)=>Be(o,t,r.concat(a)));s&&(n=n.concat(s))}else if(W(e)){const s=Object.keys(e).map(o=>Be(e[o],t,r.concat(o)));s&&(n=n.concat(s))}return n=ie(n),n}function Xr(e,t){if(!Array.isArray(t))return!1;for(let r=0,n=t.length;r<n;r+=1)if(t[r]!==e[r])return!1;return!0}function Zr(e,t){return t.reduce((r,n)=>typeof n<"u"&&r?r[n]:r,e)}function _r(e){return St(ie(At(e)))}function At(e){return Array.isArray(e)?e:[e]}function ie(e){return[].concat(...e.map(t=>Array.isArray(t)?ie(t):t))}function St(e){return e.filter(t=>typeof t<"u")}function W(e){return e&&typeof e=="object"}function qr(e){return W(e)&&Rt(e.then)}function Rt(e){return e&&typeof e=="function"}function en(e){return e instanceof Error}function Tt(e){if(be(e)){const{op:t}=e;return t==="add"||t==="remove"||t==="replace"}return!1}function tn(e){return Object.prototype.toString.call(e)==="[object GeneratorFunction]"}function Ct(e){return Tt(e)||be(e)&&e.type==="mutation"}function pe(e){return Ct(e)&&(e.op==="add"||e.op==="replace"||e.op==="merge"||e.op==="mergeDeep")}function rn(e){return be(e)&&e.type==="context"}function be(e){return e&&typeof e=="object"}function Te(e,t){try{return Br(e,t)}catch(r){return console.error(r),{}}}const{fetch:nn,Response:sn,Headers:on,Request:an,FormData:cn,File:ln,Blob:un}=globalThis;typeof globalThis.fetch>"u"&&(globalThis.fetch=nn);typeof globalThis.Headers>"u"&&(globalThis.Headers=on);typeof globalThis.Request>"u"&&(globalThis.Request=an);typeof globalThis.Response>"u"&&(globalThis.Response=sn);typeof globalThis.FormData>"u"&&(globalThis.FormData=cn);typeof globalThis.File>"u"&&(globalThis.File=ln);typeof globalThis.Blob>"u"&&(globalThis.Blob=un);const Mt="application/json, application/yaml",he="https://swagger.io",fn=Object.freeze({url:"/"}),dn=["properties"],pn=["properties"],hn=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],yn=["schema/example","items/example"];function Et(e){const t=e[e.length-1],r=e[e.length-2],n=e.join("/");return dn.indexOf(t)>-1&&pn.indexOf(r)===-1||hn.indexOf(n)>-1||yn.some(s=>n.indexOf(s)>-1)}function mn(e,t,{specmap:r,getBaseUrlForNodePath:n=o=>r.getContext([...t,...o]).baseDoc,targetKeys:s=["$ref","$$ref"]}={}){const o=[];return Vr(e).forEach(function(){if(s.includes(this.key)&&typeof this.node=="string"){const i=this.path,l=t.concat(this.path),c=ze(this.node,n(i));o.push(r.replace(l,c))}}),o}function ze(e,t){const[r,n]=e.split("#"),s=t??"",o=r??"";let a;if(mt(s))a=U(s,o);else{const i=U(he,s),c=U(i,o).replace(he,"");a=o.startsWith("/")?c:c.substring(1)}return n?`${a}#${n}`:a}const gn=/^([a-z]+:\/\/|\/\/)/i;class Z extends We{}const z={},ut=new WeakMap,wn=[e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="examples",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="examples"&&e[6]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="examples"&&e[7]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[4]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value"],bn=e=>wn.some(t=>t(e)),vn={key:"$ref",plugin:(e,t,r,n)=>{const s=n.getInstance(),o=r.slice(0,-1);if(Et(o)||bn(o))return;const{baseDoc:a}=n.getContext(r);if(typeof e!="string")return new Z("$ref: must be a string (JSON-Ref)",{$ref:e,baseDoc:a,fullPath:r});const i=It(e),l=i[0],c=i[1]||"";let u;try{u=a||l?jt(l,a):null}catch(h){return Ve(h,{pointer:c,$ref:e,basePath:u,fullPath:r})}let d,f;if(Sn(c,u,o,n)&&!s.useCircularStructures){const h=ze(e,u);return e===h?null:S.replace(r,h)}if(u==null?(f=Ge(c),d=n.get(f),typeof d>"u"&&(d=new Z(`Could not resolve reference: ${e}`,{pointer:c,$ref:e,baseDoc:a,fullPath:r}))):(d=$t(u,c),d.__value!=null?d=d.__value:d=d.catch(h=>{throw Ve(h,{pointer:c,$ref:e,baseDoc:a,fullPath:r})})),d instanceof Error)return[S.remove(r),d];const p=ze(e,u),m=S.replace(o,d,{$$ref:p});if(u&&u!==a)return[m,S.context(o,{baseDoc:u})];try{if(!Rn(n.state,m)||s.useCircularStructures)return m}catch{return null}}},Ke=Object.assign(vn,{docCache:z,absoluteify:jt,clearCache:Pn,JSONRefError:Z,wrapError:Ve,getDoc:kt,split:It,extractFromDoc:$t,fetchJSON:On,extract:Le,jsonPointerToArray:Ge,unescapeJsonPointerToken:Dt});function jt(e,t){if(!gn.test(e)){if(!t)throw new Z(`Tried to resolve a relative URL, without having a basePath. path: '${e}' basePath: '${t}'`);return U(t,e)}return e}function Ve(e,t){let r;return e&&e.response&&e.response.body?r=`${e.response.body.code} ${e.response.body.message}`:r=e.message,new Z(`Could not resolve reference: ${r}`,{...t,cause:e})}function It(e){return(e+"").split("#")}function $t(e,t){const r=z[e];if(r&&!S.isPromise(r))try{const n=Le(t,r);return Object.assign(Promise.resolve(n),{__value:n})}catch(n){return Promise.reject(n)}return kt(e).then(n=>Le(t,n))}function Pn(e){typeof e<"u"?delete z[e]:Object.keys(z).forEach(t=>{delete z[t]})}function kt(e){const t=z[e];return t?S.isPromise(t)?t:Promise.resolve(t):(z[e]=Ke.fetchJSON(e).then(r=>(z[e]=r,r)),z[e])}function On(e){return fetch(e,{headers:{Accept:Mt},loadSpec:!0}).then(t=>t.text()).then(t=>X.load(t))}function Le(e,t){const r=Ge(e);if(r.length<1)return t;const n=S.getIn(t,r);if(typeof n>"u")throw new Z(`Could not resolve pointer: ${e} does not exist in document`,{pointer:e});return n}function Ge(e){if(typeof e!="string")throw new TypeError(`Expected a string, got a ${typeof e}`);return e[0]==="/"&&(e=e.substr(1)),e===""?[]:e.split("/").map(Dt)}function Dt(e){return typeof e!="string"?e:new URLSearchParams(`=${e.replace(/~1/g,"/").replace(/~0/g,"~")}`).get("")}function Ut(e){return new URLSearchParams([["",e.replace(/~/g,"~0").replace(/\//g,"~1")]]).toString().slice(1)}function xn(e){return e.length===0?"":`/${e.map(Ut).join("/")}`}const An=e=>!e||e==="/"||e==="#";function Ce(e,t){if(An(t))return!0;const r=e.charAt(t.length),n=t.slice(-1);return e.indexOf(t)===0&&(!r||r==="/"||r==="#")&&n!=="#"}function Sn(e,t,r,n){let s=ut.get(n);s||(s={},ut.set(n,s));const o=xn(r),a=`${t||"<specmap-base>"}#${e}`,i=o.replace(/allOf\/\d+\/?/g,""),l=n.contextTree.get([]).baseDoc;if(t===l&&Ce(i,e))return!0;let c="";if(r.some(d=>(c=`${c}/${Ut(d)}`,s[c]&&s[c].some(f=>Ce(f,a)||Ce(a,f)))))return!0;s[i]=(s[i]||[]).concat(a)}function Rn(e,t){const r=[e];return t.path.reduce((s,o)=>(r.push(s[o]),s[o]),e),n(t.value);function n(s){return S.isObject(s)&&(r.indexOf(s)>=0||Object.keys(s).some(o=>n(s[o])))}}const Tn={key:"allOf",plugin:(e,t,r,n,s)=>{if(s.meta&&s.meta.$$ref)return;const o=r.slice(0,-1);if(Et(o))return;if(!Array.isArray(e)){const c=new TypeError("allOf must be an array");return c.fullPath=r,c}let a=!1,i=s.value;if(o.forEach(c=>{i&&(i=i[c])}),i={...i},Object.keys(i).length===0)return;delete i.allOf;const l=[];return l.push(n.replace(o,{})),e.forEach((c,u)=>{if(!n.isObject(c)){if(a)return null;a=!0;const p=new TypeError("Elements in allOf must be objects");return p.fullPath=r,l.push(p)}l.push(n.mergeDeep(o,c));const d=r.slice(0,-1),f=mn(c,d,{getBaseUrlForNodePath:p=>n.getContext([...r,u,...p]).baseDoc,specmap:n});l.push(...f)}),i.example&&l.push(n.remove([].concat(o,"example"))),l.push(n.mergeDeep(o,i)),i.$$ref||l.push(n.remove([].concat(o,"$$ref"))),l}},Cn={key:"parameters",plugin:(e,t,r,n)=>{if(Array.isArray(e)&&e.length){const s=Object.assign([],e),o=r.slice(0,-1),a={...S.getIn(n.spec,o)};for(let i=0;i<e.length;i+=1){const l=e[i];try{s[i].default=n.parameterMacro(a,l)}catch(c){const u=new Error(c);return u.fullPath=r,u}}return S.replace(r,s)}return S.replace(r,e)}},Mn={key:"properties",plugin:(e,t,r,n)=>{const s={...e};for(const a in e)try{s[a].default=n.modelPropertyMacro(s[a])}catch(i){const l=new Error(i);return l.fullPath=r,l}return S.replace(r,s)}};class En{constructor(t){this.root=Me(t||{})}set(t,r){const n=this.getParent(t,!0);if(!n){ye(this.root,r,null);return}const s=t[t.length-1],{children:o}=n;if(o[s]){ye(o[s],r,n);return}o[s]=Me(r,n)}get(t){if(t=t||[],t.length<1)return this.root.value;let r=this.root,n,s;for(let o=0;o<t.length&&(s=t[o],n=r.children,!!n[s]);o+=1)r=n[s];return r&&r.protoValue}getParent(t,r){return!t||t.length<1?null:t.length<2?this.root:t.slice(0,-1).reduce((n,s)=>{if(!n)return n;const{children:o}=n;return!o[s]&&r&&(o[s]=Me(null,n)),o[s]},this.root)}}function Me(e,t){return ye({children:{}},e,t)}function ye(e,t,r){return e.value=t||{},e.protoValue=r?{...r.protoValue,...e.value}:e.value,Object.keys(e.children).forEach(n=>{const s=e.children[n];e.children[n]=ye(s,s.value,e)}),e}const ft=100,jn=3e3,dt=()=>{};class In{static getPluginName(t){return t.pluginName}static getPatchesOfType(t,r){return t.filter(r)}constructor(t){Object.assign(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new En,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Object.assign(Object.create(this),S,{getInstance:()=>this}),allowMetaPatches:!1},t),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=this.plugins.map(this.wrapPlugin.bind(this)).filter(S.isFunction),this.patches.push(S.add([],this.spec)),this.patches.push(S.context([],this.context)),this.updatePatches(this.patches)}debug(t,...r){this.debugLevel===t&&console.log(...r)}verbose(t,...r){this.debugLevel==="verbose"&&console.log(`[${t}]   `,...r)}wrapPlugin(t,r){const{pathDiscriminator:n}=this;let s=null,o;return t[this.pluginProp]?(s=t,o=t[this.pluginProp]):S.isFunction(t)?o=t:S.isObject(t)&&(o=a(t)),Object.assign(o.bind(s),{pluginName:t.name||r,isGenerator:S.isGenerator(o)});function a(i){const l=(c,u)=>Array.isArray(c)?c.every((d,f)=>d===u[f]):!0;return function*(u,d){const f={};for(const[m,h]of u.filter(S.isAdditiveMutation).entries())if(m<jn)yield*p(h.value,h.path,h);else return;function*p(m,h,g){if(!S.isObject(m))i.key===h[h.length-1]&&(yield i.plugin(m,i.key,h,d));else{const w=h.length-1,O=h[w],x=h.indexOf("properties"),T=O==="properties"&&w===x,j=d.allowMetaPatches&&f[m.$$ref];for(const b of Object.keys(m)){const R=m[b],E=h.concat(b),y=S.isObject(R),P=m.$$ref;if(j||y&&(d.allowMetaPatches&&P&&(f[P]=!0),yield*p(R,E,g)),!T&&b===i.key){const C=l(n,h);(!n||C)&&(yield i.plugin(R,b,E,d,g))}}}}}}}nextPlugin(){return this.wrappedPlugins.find(t=>this.getMutationsForPlugin(t).length>0)}nextPromisedPatch(){if(this.promisedPatches.length>0)return Promise.race(this.promisedPatches.map(t=>t.value))}getPluginHistory(t){const r=this.constructor.getPluginName(t);return this.pluginHistory[r]||[]}getPluginRunCount(t){return this.getPluginHistory(t).length}getPluginHistoryTip(t){const r=this.getPluginHistory(t);return r&&r[r.length-1]||{}}getPluginMutationIndex(t){const r=this.getPluginHistoryTip(t).mutationIndex;return typeof r!="number"?-1:r}updatePluginHistory(t,r){const n=this.constructor.getPluginName(t);this.pluginHistory[n]=this.pluginHistory[n]||[],this.pluginHistory[n].push(r)}updatePatches(t){S.normalizeArray(t).forEach(r=>{if(r instanceof Error){this.errors.push(r);return}try{if(!S.isObject(r)){this.debug("updatePatches","Got a non-object patch",r);return}if(this.showDebug&&this.allPatches.push(r),S.isPromise(r.value)){this.promisedPatches.push(r),this.promisedPatchThen(r);return}if(S.isContextPatch(r)){this.setContext(r.path,r.value);return}S.isMutation(r)&&this.updateMutations(r)}catch(n){console.error(n),this.errors.push(n)}})}updateMutations(t){typeof t.value=="object"&&!Array.isArray(t.value)&&this.allowMetaPatches&&(t.value={...t.value});const r=S.applyPatch(this.state,t,{allowMetaPatches:this.allowMetaPatches});r&&(this.mutations.push(t),this.state=r)}removePromisedPatch(t){const r=this.promisedPatches.indexOf(t);if(r<0){this.debug("Tried to remove a promisedPatch that isn't there!");return}this.promisedPatches.splice(r,1)}promisedPatchThen(t){return t.value=t.value.then(r=>{const n={...t,value:r};this.removePromisedPatch(t),this.updatePatches(n)}).catch(r=>{this.removePromisedPatch(t),this.updatePatches(r)}),t.value}getMutations(t,r){return t=t||0,typeof r!="number"&&(r=this.mutations.length),this.mutations.slice(t,r)}getCurrentMutations(){return this.getMutationsForPlugin(this.getCurrentPlugin())}getMutationsForPlugin(t){const r=this.getPluginMutationIndex(t);return this.getMutations(r+1)}getCurrentPlugin(){return this.currentPlugin}getLib(){return this.libMethods}_get(t){return S.getIn(this.state,t)}_getContext(t){return this.contextTree.get(t)}setContext(t,r){return this.contextTree.set(t,r)}_hasRun(t){return this.getPluginRunCount(this.getCurrentPlugin())>(t||0)}dispatch(){const t=this,r=this.nextPlugin();if(!r){const o=this.nextPromisedPatch();if(o)return o.then(()=>this.dispatch()).catch(()=>this.dispatch());const a={spec:this.state,errors:this.errors};return this.showDebug&&(a.patches=this.allPatches),Promise.resolve(a)}if(t.pluginCount=t.pluginCount||new WeakMap,t.pluginCount.set(r,(t.pluginCount.get(r)||0)+1),t.pluginCount[r]>ft)return Promise.resolve({spec:t.state,errors:t.errors.concat(new Error(`We've reached a hard limit of ${ft} plugin runs`))});if(r!==this.currentPlugin&&this.promisedPatches.length){const o=this.promisedPatches.map(a=>a.value);return Promise.all(o.map(a=>a.then(dt,dt))).then(()=>this.dispatch())}return n();function n(){t.currentPlugin=r;const o=t.getCurrentMutations(),a=t.mutations.length-1;try{if(r.isGenerator)for(const i of r(o,t.getLib()))s(i);else{const i=r(o,t.getLib());s(i)}}catch(i){console.error(i),s([Object.assign(Object.create(i),{plugin:r})])}finally{t.updatePluginHistory(r,{mutationIndex:a})}return t.dispatch()}function s(o){o&&(o=S.fullyNormalizeArray(o),t.updatePatches(o,r))}}}function $n(e){return new In(e).dispatch()}const Y={refs:Ke,allOf:Tn,parameters:Cn,properties:Mn},Nt=e=>e.replace(/\W/gi,"_");function kn(e,t,{v2OperationIdCompatibilityMode:r}={}){if(r){let n=`${t.toLowerCase()}_${e}`.replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return n=n||`${e.substring(1)}_${t}`,n.replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return`${t.toLowerCase()}${Nt(e)}`}function Ye(e,t,r="",{v2OperationIdCompatibilityMode:n}={}){return!e||typeof e!="object"?null:(e.operationId||"").replace(/\s/g,"").length?Nt(e.operationId):kn(t,r,{v2OperationIdCompatibilityMode:n})}function ve(e){const{spec:t}=e,{paths:r}=t,n={};if(!r||t.$$normalized)return e;for(const s in r){const o=r[s];if(o==null||!["object","function"].includes(typeof o))continue;const a=o.parameters;for(const i in o){const l=o[i];if(l==null||!["object","function"].includes(typeof l))continue;const c=Ye(l,s,i);if(c){n[c]?n[c].push(l):n[c]=[l];const u=n[c];if(u.length>1)u.forEach((d,f)=>{d.__originalOperationId=d.__originalOperationId||d.operationId,d.operationId=`${c}${f+1}`});else if(typeof l.operationId<"u"){const d=u[0];d.__originalOperationId=d.__originalOperationId||l.operationId,d.operationId=c}}if(i!=="parameters"){const u=[],d={};for(const f in t)(f==="produces"||f==="consumes"||f==="security")&&(d[f]=t[f],u.push(d));if(a&&(d.parameters=a,u.push(d)),u.length){for(const f of u)for(const p in f)if(!l[p])l[p]=f[p];else if(p==="parameters")for(const m of f[p])l[p].some(g=>g.name&&g.name===m.name||g.$ref&&g.$ref===m.$ref||g.$$ref&&g.$$ref===m.$$ref||g===m)||l[p].push(m)}}}}return t.$$normalized=!0,e}function Ft(e,t={}){const{requestInterceptor:r,responseInterceptor:n}=t,s=e.withCredentials?"include":"same-origin";return o=>e({url:o,loadSpec:!0,requestInterceptor:r,responseInterceptor:n,headers:{Accept:Mt},credentials:s}).then(a=>a.body)}function Qe(e,t){return!t&&typeof navigator<"u"&&(t=navigator),t&&t.product==="ReactNative"?!!(e&&typeof e=="object"&&typeof e.uri=="string"):typeof File<"u"&&e instanceof File||typeof Blob<"u"&&e instanceof Blob||ArrayBuffer.isView(e)?!0:e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function Bt(e,t){return Array.isArray(e)&&e.some(r=>Qe(r,t))}class He extends File{constructor(t,r="",n={}){super([t],r,n),this.data=t}valueOf(){return this.data}toString(){return this.valueOf()}}const Dn=e=>":/?#[]@!$&'()*+,;=".indexOf(e)>-1,Un=e=>/^[a-z0-9\-._~]+$/i.test(e);function zt(e,t="reserved"){return[...e].map(r=>{if(Un(r)||Dn(r)&&t==="unsafe")return r;const n=new TextEncoder;return Array.from(n.encode(r)).map(o=>`0${o.toString(16).toUpperCase()}`.slice(-2)).map(o=>`%${o}`).join("")}).join("")}function Xe(e){const{value:t}=e;return Array.isArray(t)?Nn(e):typeof t=="object"?Fn(e):Bn(e)}function I(e,t=!1){return Array.isArray(e)||e!==null&&typeof e=="object"?e=JSON.stringify(e):(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),t&&e.length>0?zt(e,t):e}function Nn({key:e,value:t,style:r,explode:n,escape:s}){if(r==="simple")return t.map(o=>I(o,s)).join(",");if(r==="label")return`.${t.map(o=>I(o,s)).join(".")}`;if(r==="matrix")return t.map(o=>I(o,s)).reduce((o,a)=>!o||n?`${o||""};${e}=${a}`:`${o},${a}`,"");if(r==="form"){const o=n?`&${e}=`:",";return t.map(a=>I(a,s)).join(o)}if(r==="spaceDelimited"){const o=n?`${e}=`:"";return t.map(a=>I(a,s)).join(` ${o}`)}if(r==="pipeDelimited"){const o=n?`${e}=`:"";return t.map(a=>I(a,s)).join(`|${o}`)}}function Fn({key:e,value:t,style:r,explode:n,escape:s}){const o=Object.keys(t);if(r==="simple")return o.reduce((a,i)=>{const l=I(t[i],s),c=n?"=":",";return`${a?`${a},`:""}${i}${c}${l}`},"");if(r==="label")return o.reduce((a,i)=>{const l=I(t[i],s),c=n?"=":".";return`${a?`${a}.`:"."}${i}${c}${l}`},"");if(r==="matrix"&&n)return o.reduce((a,i)=>{const l=I(t[i],s);return`${a?`${a};`:";"}${i}=${l}`},"");if(r==="matrix")return o.reduce((a,i)=>{const l=I(t[i],s);return`${a?`${a},`:`;${e}=`}${i},${l}`},"");if(r==="form")return o.reduce((a,i)=>{const l=I(t[i],s);return`${a?`${a}${n?"&":","}`:""}${i}${n?"=":","}${l}`},"")}function Bn({key:e,value:t,style:r,escape:n}){if(r==="simple")return I(t,n);if(r==="label")return`.${I(t,n)}`;if(r==="matrix")return`;${e}=${I(t,n)}`;if(r==="form"||r==="deepObject")return I(t,n)}const zn={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Vn={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Vt(e,t,r=!1){const{collectionFormat:n,allowEmptyValue:s,serializationOption:o,encoding:a}=t,i=typeof t=="object"&&!Array.isArray(t)?t.value:t,l=r?u=>u.toString():u=>encodeURIComponent(u),c=l(e);if(typeof i>"u"&&s)return[[c,""]];if(Qe(i)||Bt(i))return[[c,i]];if(o)return pt(e,i,r,o);if(a){if([typeof a.style,typeof a.explode,typeof a.allowReserved].some(u=>u!=="undefined")){const{style:u,explode:d,allowReserved:f}=a;return pt(e,i,r,{style:u,explode:d,allowReserved:f})}if(typeof a.contentType=="string"){if(a.contentType.startsWith("application/json")){const f=typeof i=="string"?i:JSON.stringify(i),p=l(f),m=new He(p,"blob",{type:a.contentType});return[[c,m]]}const u=l(String(i)),d=new He(u,"blob",{type:a.contentType});return[[c,d]]}return typeof i!="object"?[[c,l(i)]]:Array.isArray(i)&&i.every(u=>typeof u!="object")?[[c,i.map(l).join(",")]]:[[c,l(JSON.stringify(i))]]}return typeof i!="object"?[[c,l(i)]]:Array.isArray(i)?n==="multi"?[[c,i.map(l)]]:[[c,i.map(l).join(Vn[n||"csv"])]]:[[c,""]]}function pt(e,t,r,n){const s=n.style||"form",o=typeof n.explode>"u"?s==="form":n.explode,a=r?!1:n&&n.allowReserved?"unsafe":"reserved",i=c=>I(c,a),l=r?c=>c:c=>i(c);return typeof t!="object"?[[l(e),i(t)]]:Array.isArray(t)?o?[[l(e),t.map(i)]]:[[l(e),t.map(i).join(zn[s])]]:s==="deepObject"?Object.keys(t).map(c=>[l(`${e}[${c}]`),i(t[c])]):o?Object.keys(t).map(c=>[l(c),i(t[c])]):[[l(e),Object.keys(t).map(c=>[`${l(c)},${i(t[c])}`]).join(",")]]}function Ln(e){return Object.entries(e).reduce((t,[r,n])=>{for(const[s,o]of Vt(r,n,!0))if(Array.isArray(o))for(const a of o)if(ArrayBuffer.isView(a)){const i=new Blob([a]);t.append(s,i)}else t.append(s,a);else if(ArrayBuffer.isView(o)){const a=new Blob([o]);t.append(s,a)}else t.append(s,o);return t},new FormData)}function ht(e){const t=Object.keys(e).reduce((r,n)=>{for(const[s,o]of Vt(n,e[n]))o instanceof He?r[s]=o.valueOf():r[s]=o;return r},{});return Ne.stringify(t,{encode:!1,indices:!1})||""}function Ze(e={}){const{url:t="",query:r,form:n}=e,s=(...o)=>{const a=o.filter(i=>i).join("&");return a?`?${a}`:""};if(n){const o=Object.keys(n).some(i=>{const{value:l}=n[i];return Qe(l)||Bt(l)}),a=e.headers["content-type"]||e.headers["Content-Type"];if(o||/multipart\/form-data/i.test(a)){const i=Ln(e.form);e.formdata=i,e.body=i}else e.body=ht(n);delete e.form}if(r){const[o,a]=t.split("?");let i="";if(a){const c=Ne.parse(a);Object.keys(r).forEach(d=>delete c[d]),i=Ne.stringify(c,{encode:!0})}const l=s(i,ht(r));e.url=o+l,delete e.query}return e}const Hn=(e="")=>/(json|xml|yaml|text)\b/.test(e);function Jn(e,t){return t&&(t.indexOf("application/json")===0||t.indexOf("+json")>0)?JSON.parse(e):X.load(e)}function Wn(e){return e.includes(", ")?e.split(", "):e}function Kn(e={}){return typeof e.entries!="function"?{}:Array.from(e.entries()).reduce((t,[r,n])=>(t[r]=Wn(n),t),{})}function Gn(e,t,{loadSpec:r=!1}={}){const n={ok:e.ok,url:e.url||t,status:e.status,statusText:e.statusText,headers:Kn(e.headers)},s=n.headers["content-type"],o=r||Hn(s);return(o?e.text:e.blob||e.buffer).call(e).then(i=>{if(n.text=i,n.data=i,o)try{const l=Jn(i,s);n.body=l,n.obj=l}catch(l){n.parseError=l}return n})}async function me(e,t={}){typeof e=="object"&&(t=e,e=t.url),t.headers=t.headers||{},t=Ze(t),t.headers&&Object.keys(t.headers).forEach(s=>{const o=t.headers[s];typeof o=="string"&&(t.headers[s]=o.replace(/\n+/g," "))}),t.requestInterceptor&&(t=await t.requestInterceptor(t)||t);const r=t.headers["content-type"]||t.headers["Content-Type"];/multipart\/form-data/i.test(r)&&(delete t.headers["content-type"],delete t.headers["Content-Type"]);let n;try{n=await(t.userFetch||fetch)(t.url,t),n=await Gn(n,e,t),t.responseInterceptor&&(n=await t.responseInterceptor(n)||n)}catch(s){if(!n)throw s;const o=new Error(n.statusText||`response status is ${n.status}`);throw o.status=n.status,o.statusCode=n.status,o.responseError=s,o}if(!n.ok){const s=new Error(n.statusText||`response status is ${n.status}`);throw s.status=n.status,s.statusCode=n.status,s.response=n,s}return n}function uo(e,t,r){return r=r||(n=>n),t=t||(n=>n),n=>(typeof n=="string"&&(n={url:n}),n=Ze(n),n=t(n),r(e(n)))}const _e=e=>{var t,r;const{baseDoc:n,url:s}=e,o=(t=n??s)!==null&&t!==void 0?t:"";return typeof((r=globalThis.document)===null||r===void 0?void 0:r.baseURI)=="string"?String(new URL(o,globalThis.document.baseURI)):o},Lt=e=>{const{fetch:t,http:r}=e;return t||r||me};async function qe(e){const{spec:t,mode:r,allowMetaPatches:n=!0,pathDiscriminator:s,modelPropertyMacro:o,parameterMacro:a,requestInterceptor:i,responseInterceptor:l,skipNormalization:c,useCircularStructures:u}=e,d=_e(e),f=Lt(e);return p(t);function p(m){d&&(Y.refs.docCache[d]=m),Y.refs.fetchJSON=Ft(f,{requestInterceptor:i,responseInterceptor:l});const h=[Y.refs];return typeof a=="function"&&h.push(Y.parameters),typeof o=="function"&&h.push(Y.properties),r!=="strict"&&h.push(Y.allOf),$n({spec:m,context:{baseDoc:d},plugins:h,allowMetaPatches:n,pathDiscriminator:s,parameterMacro:a,modelPropertyMacro:o,useCircularStructures:u}).then(c?async g=>g:ve)}}const Yn={name:"generic",match(){return!0},normalize({spec:e}){const{spec:t}=ve({spec:e});return t},async resolve(e){return qe(e)}};async function Qn(e){return qe(e)}const Xn=e=>{try{const{swagger:t}=e;return t==="2.0"}catch{return!1}},Ht=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.0\.([0123])(?:-rc[012])?$/.test(t)}catch{return!1}},Jt=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.1\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},Wt=e=>Ht(e)||Jt(e),Zn={name:"openapi-2",match({spec:e}){return Xn(e)},normalize({spec:e}){const{spec:t}=ve({spec:e});return t},async resolve(e){return Qn(e)}};async function _n(e){return qe(e)}const qn={name:"openapi-3-0",match({spec:e}){return Ht(e)},normalize({spec:e}){const{spec:t}=ve({spec:e});return t},async resolve(e){return _n(e)}},Kt=e=>{if(!ne(e)||e.hasKey("$$normalized"))return e;const t=[qt({operationIdNormalizer:(n,s,o)=>Ye({operationId:n},s,o,{v2OperationIdCompatibilityMode:!1})}),er(),tr(),rr(),nr(),sr()],r=Zt(e,t,{toolboxCreator:_t,visitorOptions:{keyMap:ee,nodeTypeGetter:Q}});return r.set("$$normalized",!0),r},te=e=>t=>{if(t!=null&&t.$$normalized)return t;if(te.cache.has(t))return te.cache.get(t);const r=ge.refract(t),n=e(r),s=A(n);return te.cache.set(t,s),s};te.cache=new WeakMap;const{AbortController:es,AbortSignal:ts}=globalThis;typeof globalThis.AbortController>"u"&&(globalThis.AbortController=es);typeof globalThis.AbortSignal>"u"&&(globalThis.AbortSignal=ts);class rs extends or{constructor({swaggerHTTPClient:r=me,swaggerHTTPClientConfig:n={},...s}={}){super({...s,name:"http-swagger-client"});M(this,"swaggerHTTPClient",me);M(this,"swaggerHTTPClientConfig");this.swaggerHTTPClient=r,this.swaggerHTTPClientConfig=n}getHttpClient(){return this.swaggerHTTPClient}async read(r){const n=this.getHttpClient(),s=new AbortController,{signal:o}=s,a=setTimeout(()=>{s.abort()},this.timeout),i=this.getHttpClient().withCredentials||this.withCredentials?"include":"same-origin",l=this.redirects===0?"error":"follow",c=this.redirects>0?this.redirects:void 0;try{return(await n({url:r.uri,signal:o,userFetch:async(d,f)=>{let p=await fetch(d,f);try{p.headers.delete("Content-Type")}catch{p=new Response(p.body,{...p,headers:new Headers(p.headers)}),p.headers.delete("Content-Type")}return p},credentials:i,redirect:l,follow:c,...this.swaggerHTTPClientConfig})).text.arrayBuffer()}catch(u){throw new ir(`Error downloading "${r.uri}"`,{cause:u})}finally{clearTimeout(a)}}}class ns extends we{constructor(t={}){super({...t,name:"json-swagger-client",fileExtensions:[".json"],mediaTypes:["application/json"]})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return JSON.parse(t.toString()),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("json-swagger-client parser plugin doesn't support sourceMaps option");const r=new oe,n=t.toString();if(this.allowEmpty&&n.trim()==="")return r;try{const s=gt(JSON.parse(n));return s.classes.push("result"),r.push(s),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class ss extends we{constructor(t={}){super({...t,name:"yaml-1-2-swagger-client",fileExtensions:[".yaml",".yml"],mediaTypes:["text/yaml","application/yaml"]})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return X.load(t.toString(),{schema:De}),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("yaml-1-2-swagger-client parser plugin doesn't support sourceMaps option");const r=new oe,n=t.toString();try{const s=X.load(n,{schema:De});if(this.allowEmpty&&typeof s>"u")return r;const o=gt(s);return o.classes.push("result"),r.push(o),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class os extends we{constructor(r={}){super({...r,name:"openapi-json-3-1-swagger-client",fileExtensions:[".json"],mediaTypes:new wt(...se.filterByFormat("generic"),...se.filterByFormat("json"))});M(this,"detectionRegExp",/"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))"/)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return JSON.parse(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-json-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new oe,s=r.toString();if(this.allowEmpty&&s.trim()==="")return n;try{const o=JSON.parse(s),a=ge.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}class is extends we{constructor(r={}){super({name:"openapi-yaml-3-1-swagger-client",...r,fileExtensions:[".yaml",".yml"],mediaTypes:new wt(...se.filterByFormat("generic"),...se.filterByFormat("yaml"))});M(this,"detectionRegExp",/(?<YAML>^(["']?)openapi\2\s*:\s*(["']?)(?<version_yaml>3\.1\.(?:[1-9]\d*|0))\3(?:\s+|$))|(?<JSON>"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))")/m)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return X.load(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-yaml-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new oe,s=r.toString();try{const o=X.load(s,{schema:De});if(this.allowEmpty&&typeof o>"u")return n;const a=ge.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}const as=e=>e.slice(2),N=e=>{const t=as(e);return t.reduce((r,n,s)=>{if(bt(n)){const o=String(A(n.key));r.push(o)}else if(vt(t[s-2])){const o=t[s-2].content.indexOf(n);r.push(o)}return r},[])};class cs{constructor({modelPropertyMacro:t,options:r}){M(this,"modelPropertyMacro");M(this,"options");M(this,"SchemaElement",{leave:(t,r,n,s,o)=>{typeof t.properties>"u"||ne(t.properties)&&t.properties.forEach(a=>{if(ne(a))try{const c=this.modelPropertyMacro(A(a));a.set("default",c)}catch(c){var i,l;const u=new Error(c,{cause:c});u.fullPath=[...N([...o,n,t]),"properties"],(i=this.options.dereference.dereferenceOpts)===null||i===void 0||(i=i.errors)===null||i===void 0||(l=i.push)===null||l===void 0||l.call(i,u)}})}});this.modelPropertyMacro=t,this.options=r}}class ls{constructor({options:t}){M(this,"options");M(this,"SchemaElement",{leave(t,r,n,s,o){if(typeof t.allOf>"u")return;if(!vt(t.allOf)){var a,i;const d=new TypeError("allOf must be an array");d.fullPath=[...N([...o,n,t]),"allOf"],(a=this.options.dereference.dereferenceOpts)===null||a===void 0||(a=a.errors)===null||a===void 0||(i=a.push)===null||i===void 0||i.call(a,d);return}if(t.allOf.isEmpty){t.remove("allOf");return}if(!t.allOf.content.every($e)){var c,u;const d=new TypeError("Elements in allOf must be objects");d.fullPath=[...N([...o,n,t]),"allOf"],(c=this.options.dereference.dereferenceOpts)===null||c===void 0||(c=c.errors)===null||c===void 0||(u=c.push)===null||u===void 0||u.call(c,d);return}for(;t.hasKey("allOf");){const{allOf:d}=t;t.remove("allOf");const f=ar.all([...d.content,t]);if(t.hasKey("$$ref")||f.remove("$$ref"),t.hasKey("example")){const p=f.getMember("example");p&&(p.value=t.get("example"))}if(t.hasKey("examples")){const p=f.getMember("examples");p&&(p.value=t.get("examples"))}t.content=f.content}}});this.options=t}}var J;class us{constructor({parameterMacro:t,options:r}){M(this,"parameterMacro");M(this,"options");nt(this,J);M(this,"OperationElement",{enter:t=>{Ae(this,J,t)},leave:()=>{Ae(this,J,void 0)}});M(this,"ParameterElement",{leave:(t,r,n,s,o)=>{const a=xe(this,J)?A(xe(this,J)):null,i=A(t);try{const u=this.parameterMacro(a,i);t.set("default",u)}catch(u){var l,c;const d=new Error(u,{cause:u});d.fullPath=N([...o,n]),(l=this.options.dereference.dereferenceOpts)===null||l===void 0||(l=l.errors)===null||l===void 0||(c=l.push)===null||c===void 0||c.call(l,d)}}});this.parameterMacro=t,this.options=r}}J=new WeakMap;const le=e=>{if(e.cause==null)return e;let{cause:t}=e;for(;t.cause!=null;)t=t.cause;return t};class fs extends We{}const{wrapError:Ee}=Ke,je=Pt[Symbol.for("nodejs.util.promisify.custom")],k=new cr,H=(e,t,r,n)=>{bt(n)?n.value=e:Array.isArray(n)&&(n[r]=e)};class re extends lr{constructor({allowMetaPatches:r=!0,useCircularStructures:n=!1,basePath:s=null,...o}){super(o);M(this,"useCircularStructures");M(this,"allowMetaPatches");M(this,"basePath");this.allowMetaPatches=r,this.useCircularStructures=n,this.basePath=s}async ReferenceElement(r,n,s,o,a,i){try{if(this.indirections.includes(r))return!1;const[m,h]=this.toAncestorLineage([...a,s]),g=this.toBaseURI(A(r.$ref)),w=B(this.reference.uri)===g,O=!w;if(!this.options.resolve.internal&&w||!this.options.resolve.external&&O)return!1;const x=await this.toReference(A(r.$ref)),T=U(g,A(r.$ref));this.indirections.push(r);const j=K(T);let b=q(j,x.value.result);if(b.id=k.identify(b),st(b)){const P=A(r.meta.get("referenced-element")),C=`${P}-${A(k.identify(b))}`;this.refractCache.has(C)?b=this.refractCache.get(C):ur(b)?(b=fr.refract(b),b.setMetaProperty("referenced-element",P),this.refractCache.set(C,b)):(b=this.namespace.getElementClass(P).refract(b),this.refractCache.set(C,b))}if(r===b)throw new G("Recursive Reference Object detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Se(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(m.includes(b)){if(x.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var l,c;const P=new Re(b.id,{type:"reference",uri:x.uri,$ref:A(r.$ref),baseURI:T,referencingElement:r}),v=((l=(c=this.options.dereference.strategyOpts["openapi-3-1"])===null||c===void 0?void 0:c.circularReplacer)!==null&&l!==void 0?l:this.options.dereference.circularReplacer)(P);return i.replaceWith(P,H),s?!1:v}}const R=B(x.refSet.rootRef.uri)!==x.uri,E=["error","replace"].includes(this.options.dereference.circular);if((O||R||dr(b)||E)&&!m.includesCycle(b)){var u;h.add(r);const P=new re({reference:x,namespace:this.namespace,indirections:[...this.indirections],options:this.options,refractCache:this.refractCache,ancestors:m,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...N([...a,s,r]),"$ref"]});b=await je(b,P,{keyMap:ee,nodeTypeGetter:Q}),h.delete(r)}this.indirections.pop();const y=pr(b);if(y.setMetaProperty("ref-fields",{$ref:A(r.$ref),description:A(r.description),summary:A(r.summary)}),y.setMetaProperty("ref-origin",x.uri),y.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),ne(b)&&(r.hasKey("description")&&"description"in b&&(y.remove("description"),y.set("description",r.get("description"))),r.hasKey("summary")&&"summary"in b&&(y.remove("summary"),y.set("summary",r.get("summary")))),this.allowMetaPatches&&ne(y)&&!y.hasKey("$$ref")){const P=U(g,T);y.set("$$ref",P)}return i.replaceWith(y,H),s?!1:y}catch(m){var d,f,p;const h=le(m),g=Ee(h,{baseDoc:this.reference.uri,$ref:A(r.$ref),pointer:K(A(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(p=f.push)===null||p===void 0||p.call(f,g);return}}async PathItemElement(r,n,s,o,a,i){try{if(!ae(r.$ref))return;if(this.indirections.includes(r)||hr(["cycle"],r.$ref))return!1;const[m,h]=this.toAncestorLineage([...a,s]),g=this.toBaseURI(A(r.$ref)),w=B(this.reference.uri)===g,O=!w;if(!this.options.resolve.internal&&w||!this.options.resolve.external&&O)return;const x=await this.toReference(A(r.$ref)),T=U(g,A(r.$ref));this.indirections.push(r);const j=K(T);let b=q(j,x.value.result);if(b.id=k.identify(b),st(b)){const y=`path-item-${A(k.identify(b))}`;this.refractCache.has(y)?b=this.refractCache.get(y):(b=ot.refract(b),this.refractCache.set(y,b))}if(r===b)throw new G("Recursive Path Item Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Se(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(m.includes(b)){if(x.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var l,c;const y=new Re(b.id,{type:"path-item",uri:x.uri,$ref:A(r.$ref),baseURI:T,referencingElement:r}),C=((l=(c=this.options.dereference.strategyOpts["openapi-3-1"])===null||c===void 0?void 0:c.circularReplacer)!==null&&l!==void 0?l:this.options.dereference.circularReplacer)(y);return i.replaceWith(y,H),s?!1:C}}const R=B(x.refSet.rootRef.uri)!==x.uri,E=["error","replace"].includes(this.options.dereference.circular);if((O||R||it(b)&&ae(b.$ref)||E)&&!m.includesCycle(b)){var u;h.add(r);const y=new re({reference:x,namespace:this.namespace,indirections:[...this.indirections],options:this.options,ancestors:m,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...N([...a,s,r]),"$ref"]});b=await je(b,y,{keyMap:ee,nodeTypeGetter:Q}),h.delete(r)}if(this.indirections.pop(),it(b)){const y=new ot([...b.content],D(b.meta),D(b.attributes));if(r.forEach((P,C,v)=>{y.remove(A(C)),y.content.push(v)}),y.remove("$ref"),y.setMetaProperty("ref-fields",{$ref:A(r.$ref)}),y.setMetaProperty("ref-origin",x.uri),y.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),this.allowMetaPatches&&typeof y.get("$$ref")>"u"){const P=U(g,T);y.set("$$ref",P)}b=y}return i.replaceWith(b,H),s?void 0:b}catch(m){var d,f,p;const h=le(m),g=Ee(h,{baseDoc:this.reference.uri,$ref:A(r.$ref),pointer:K(A(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(p=f.push)===null||p===void 0||p.call(f,g);return}}async SchemaElement(r,n,s,o,a,i){try{if(!ae(r.$ref))return;if(this.indirections.includes(r))return!1;const[m,h]=this.toAncestorLineage([...a,s]);let g=await this.toReference(ce(this.reference.uri)),{uri:w}=g;const O=yr(w,r),x=B(O),T=new mr({uri:x}),j=!this.options.resolve.resolvers.some(v=>v.canRead(T)),b=!j;let R=B(this.reference.uri)===O,E=!R;this.indirections.push(r);let y;try{if(j||b){w=this.toBaseURI(O);const v=O,$=V(g.value.result);if(y=gr(v,$),y=V(y),y.id=k.identify(y),!this.options.resolve.internal&&R||!this.options.resolve.external&&E)return}else{if(w=this.toBaseURI(O),R=B(this.reference.uri)===w,E=!R,!this.options.resolve.internal&&R||!this.options.resolve.external&&E)return;g=await this.toReference(ce(O));const v=K(O),$=V(g.value.result);y=q(v,$),y=V(y),y.id=k.identify(y)}}catch(v){if(b&&v instanceof wr)if(br(at(O))){if(R=B(this.reference.uri)===w,E=!R,!this.options.resolve.internal&&R||!this.options.resolve.external&&E)return;g=await this.toReference(ce(O));const $=at(O),F=V(g.value.result);y=vr($,F),y=V(y),y.id=k.identify(y)}else{if(w=this.toBaseURI(A(O)),R=B(this.reference.uri)===w,E=!R,!this.options.resolve.internal&&R||!this.options.resolve.external&&E)return;g=await this.toReference(ce(O));const $=K(O),F=V(g.value.result);y=q($,F),y=V(y),y.id=k.identify(y)}else throw v}if(r===y)throw new G("Recursive Schema Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Se(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(m.includes(y)){if(g.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var l,c;const v=new Re(y.id,{type:"json-schema",uri:g.uri,$ref:A(r.$ref),baseURI:U(w,O),referencingElement:r}),F=((l=(c=this.options.dereference.strategyOpts["openapi-3-1"])===null||c===void 0?void 0:c.circularReplacer)!==null&&l!==void 0?l:this.options.dereference.circularReplacer)(v);return i.replaceWith(F,H),s?!1:F}}const P=B(g.refSet.rootRef.uri)!==g.uri,C=["error","replace"].includes(this.options.dereference.circular);if((E||P||$e(y)&&ae(y.$ref)||C)&&!m.includesCycle(y)){var u;h.add(r);const v=new re({reference:g,namespace:this.namespace,indirections:[...this.indirections],options:this.options,useCircularStructures:this.useCircularStructures,allowMetaPatches:this.allowMetaPatches,ancestors:m,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...N([...a,s,r]),"$ref"]});y=await je(y,v,{keyMap:ee,nodeTypeGetter:Q}),h.delete(r)}if(this.indirections.pop(),Pr(y)){const v=D(y);return v.setMetaProperty("ref-fields",{$ref:A(r.$ref)}),v.setMetaProperty("ref-origin",g.uri),v.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),i.replaceWith(v,H),s?!1:v}if($e(y)){const v=new Or([...y.content],D(y.meta),D(y.attributes));if(r.forEach(($,F,Oe)=>{v.remove(A(F)),v.content.push(Oe)}),v.remove("$ref"),v.setMetaProperty("ref-fields",{$ref:A(r.$ref)}),v.setMetaProperty("ref-origin",g.uri),v.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),this.allowMetaPatches&&typeof v.get("$$ref")>"u"){const $=U(w,O);v.set("$$ref",$)}y=v}return i.replaceWith(y,H),s?void 0:y}catch(m){var d,f,p;const h=le(m),g=new fs(`Could not resolve reference: ${h.message}`,{baseDoc:this.reference.uri,$ref:A(r.$ref),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"],cause:h});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(p=f.push)===null||p===void 0||p.call(f,g);return}}async LinkElement(){}async ExampleElement(r,n,s,o,a,i){try{return await super.ExampleElement(r,n,s,o,a,i)}catch(d){var l,c,u;const f=le(d),p=Ee(f,{baseDoc:this.reference.uri,externalValue:A(r.externalValue),fullPath:(l=this.basePath)!==null&&l!==void 0?l:[...N([...a,s,r]),"externalValue"]});(c=this.options.dereference.dereferenceOpts)===null||c===void 0||(c=c.errors)===null||c===void 0||(u=c.push)===null||u===void 0||u.call(c,p);return}}}const ds=xr[Symbol.for("nodejs.util.promisify.custom")];class ps{constructor({parameterMacro:t,modelPropertyMacro:r,mode:n,options:s,...o}){const a=[];a.push(new re({...o,options:s})),typeof r=="function"&&a.push(new cs({modelPropertyMacro:r,options:s})),n!=="strict"&&a.push(new ls({options:s})),typeof t=="function"&&a.push(new us({parameterMacro:t,options:s}));const i=ds(a,{nodeTypeGetter:Q});Object.assign(this,i)}}const hs=Pt[Symbol.for("nodejs.util.promisify.custom")];class ys extends Ar{constructor({allowMetaPatches:r=!1,parameterMacro:n=null,modelPropertyMacro:s=null,mode:o="non-strict",ancestors:a=[],...i}={}){super({...i});M(this,"allowMetaPatches");M(this,"parameterMacro");M(this,"modelPropertyMacro");M(this,"mode");M(this,"ancestors");this.name="openapi-3-1-swagger-client",this.allowMetaPatches=r,this.parameterMacro=n,this.modelPropertyMacro=s,this.mode=o,this.ancestors=[...a]}async dereference(r,n){var s;const o=Sr(Rr),a=(s=n.dereference.refSet)!==null&&s!==void 0?s:new ke,i=new ke;let l=a,c;a.has(r.uri)?c=a.find(f=>f.uri===r.uri):(c=new ue({uri:r.uri,value:r.parseResult}),a.add(c)),n.dereference.immutable&&(a.refs.map(f=>new ue({...f,value:D(f.value)})).forEach(f=>i.add(f)),c=i.find(f=>f.uri===r.uri),l=i);const u=new ps({reference:c,namespace:o,options:n,allowMetaPatches:this.allowMetaPatches,ancestors:this.ancestors,modelPropertyMacro:this.modelPropertyMacro,mode:this.mode,parameterMacro:this.parameterMacro}),d=await hs(l.rootRef.value,u,{keyMap:ee,nodeTypeGetter:Q});return n.dereference.immutable&&i.refs.filter(f=>f.uri.startsWith("immutable://")).map(f=>new ue({...f,uri:f.uri.replace(/^immutable:\/\//,"")})).forEach(f=>a.add(f)),n.dereference.refSet===null&&a.clean(),i.clean(),d}}const ms=e=>{const t=A(e.meta.get("baseURI")),r=e.meta.get("referencingElement");return new Dr({$ref:t},D(r.meta),D(r.attributes))},et=async e=>{const{spec:t,timeout:r,redirects:n,requestInterceptor:s,responseInterceptor:o,pathDiscriminator:a=[],allowMetaPatches:i=!1,useCircularStructures:l=!1,skipNormalization:c=!1,parameterMacro:u=null,modelPropertyMacro:d=null,mode:f="non-strict"}=e;try{const{cache:p}=et,m=mt(ct())?ct():he,h=_e(e),g=U(m,h);let w;p.has(t)?w=p.get(t):(w=ge.refract(t),w.classes.push("result"),p.set(t,w));const O=new oe([w]),x=Tr(a),T=x===""?"":`#${x}`,j=q(x,w),b=new ue({uri:g,value:O}),R=new ke({refs:[b]});x!==""&&(R.rootRef=void 0);const E=[new Set([j])],y=[],P=await Cr(j,{resolve:{baseURI:`${g}${T}`,resolvers:[new rs({timeout:r||1e4,redirects:n||10})],resolverOpts:{swaggerHTTPClientConfig:{requestInterceptor:s,responseInterceptor:o}},strategies:[new Mr]},parse:{mediaType:se.latest(),parsers:[new os({allowEmpty:!1,sourceMap:!1}),new is({allowEmpty:!1,sourceMap:!1}),new ns({allowEmpty:!1,sourceMap:!1}),new ss({allowEmpty:!1,sourceMap:!1}),new Er({allowEmpty:!1,sourceMap:!1})]},dereference:{maxDepth:100,strategies:[new ys({allowMetaPatches:i,useCircularStructures:l,parameterMacro:u,modelPropertyMacro:d,mode:f,ancestors:E})],refSet:R,dereferenceOpts:{errors:y},immutable:!1,circular:l?"ignore":"replace",circularReplacer:l?jr.dereference.circularReplacer:ms}}),C=Ir(j,P,w),v=c?C:Kt(C);return{spec:A(v),errors:y}}catch(p){if(p instanceof $r||p instanceof kr)return{spec:null,errors:[]};throw p}};et.cache=new WeakMap;const fo={name:"openapi-3-1-apidom",match({spec:e}){return Jt(e)},normalize({spec:e}){return te(Kt)(e)},async resolve(e){return et(e)}},gs=async e=>{const{spec:t,requestInterceptor:r,responseInterceptor:n}=e,s=_e(e),o=Lt(e),a=t||await Ft(o,{requestInterceptor:r,responseInterceptor:n})(s),i={...e,spec:a};return e.strategies.find(c=>c.match(i)).resolve(i)},ws=e=>async t=>{const r={...e,...t};return gs(r)},bs=ws({strategies:[qn,Zn,Yn]}),vs={body:Ps,header:xs,query:Ss,path:As,formData:Os};function Ps({req:e,value:t}){t!==void 0&&(e.body=t)}function Os({req:e,value:t,parameter:r}){if(t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.form=e.form||{},e.form[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){e.form=e.form||{};const n=r.name;e.form[n]=e.form[n]||{},e.form[n].allowEmptyValue=!0}}function xs({req:e,parameter:t,value:r}){e.headers=e.headers||{},typeof r<"u"&&(e.headers[t.name]=r)}function As({req:e,value:t,parameter:r,baseURL:n}){if(t!==void 0){const s=e.url.replace(n,""),o=Ue(s,{[r.name]:t});e.url=n+o}}function Ss({req:e,value:t,parameter:r}){if(e.query=e.query||{},t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.query[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}function Pe(e,t){return t.includes("application/json")?typeof e=="string"?e:(Array.isArray(e)&&(e=e.map(r=>{try{return JSON.parse(r)}catch{return r}})),JSON.stringify(e)):String(e)}function Rs({req:e,value:t,parameter:r,baseURL:n}){const{name:s,style:o,explode:a,content:i}=r;if(t===void 0)return;const l=e.url.replace(n,"");let c;if(i){const u=Object.keys(i)[0];c=Ue(l,{[s]:t},{encoder:d=>zt(Pe(d,u))})}else c=Ue(l,{[s]:t},{encoder:u=>Xe({key:r.name,value:u,style:o||"simple",explode:a||!1,escape:"reserved"})});e.url=n+c}function Ts({req:e,value:t,parameter:r}){if(e.query=e.query||{},t!==void 0&&r.content){const n=Object.keys(r.content)[0],s=Pe(t,n);if(s)e.query[r.name]=s;else if(r.allowEmptyValue){const o=r.name;e.query[o]=e.query[o]||{},e.query[o].allowEmptyValue=!0}return}if(t===!1&&(t="false"),t===0&&(t="0"),t){const{style:n,explode:s,allowReserved:o}=r;e.query[r.name]={value:t,serializationOption:{style:n,explode:s,allowReserved:o}}}else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}const Cs=["accept","authorization","content-type"];function Ms({req:e,parameter:t,value:r}){if(e.headers=e.headers||{},!(Cs.indexOf(t.name.toLowerCase())>-1)){if(r!==void 0&&t.content){const n=Object.keys(t.content)[0];e.headers[t.name]=Pe(r,n);return}r!==void 0&&!(Array.isArray(r)&&r.length===0)&&(e.headers[t.name]=Xe({key:t.name,value:r,style:t.style||"simple",explode:typeof t.explode>"u"?!1:t.explode,escape:!1}))}}function Es({req:e,parameter:t,value:r}){e.headers=e.headers||{};const n=typeof r;if(r!==void 0&&t.content){const s=Object.keys(t.content)[0];e.headers.Cookie=`${t.name}=${Pe(r,s)}`;return}if(r!==void 0&&!(Array.isArray(r)&&r.length===0)){const s=n==="object"&&!Array.isArray(r)&&t.explode?"":`${t.name}=`;e.headers.Cookie=s+Xe({key:t.name,value:r,escape:!1,style:t.style||"form",explode:typeof t.explode>"u"?!1:t.explode})}}const js=Object.freeze(Object.defineProperty({__proto__:null,cookie:Es,header:Ms,path:Rs,query:Ts},Symbol.toStringTag,{value:"Module"})),Is=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,{btoa:Gt}=Is;function $s(e,t){const{operation:r,requestBody:n,securities:s,spec:o,attachContentTypeForEmptyPayload:a}=e;let{requestContentType:i}=e;t=ks({request:t,securities:s,operation:r,spec:o});const l=r.requestBody||{},c=Object.keys(l.content||{}),u=i&&c.indexOf(i)>-1;if(n||a){if(i&&u)t.headers["Content-Type"]=i;else if(!i){const h=c[0];h&&(t.headers["Content-Type"]=h,i=h)}}else i&&u&&(t.headers["Content-Type"]=i);if(!e.responseContentType&&r.responses){const h=Object.entries(r.responses).filter(([g,w])=>{const O=parseInt(g,10);return O>=200&&O<300&&Ot(w.content)}).reduce((g,[,w])=>g.concat(Object.keys(w.content)),[]);h.length>0&&(t.headers.accept=h.join(", "))}if(n)if(i){if(c.indexOf(i)>-1)if(i==="application/x-www-form-urlencoded"||i==="multipart/form-data")if(typeof n=="object"){var d,f;const h=(d=(f=l.content[i])===null||f===void 0?void 0:f.encoding)!==null&&d!==void 0?d:{};t.form={},Object.keys(n).forEach(g=>{let w;try{w=JSON.parse(n[g])}catch{w=n[g]}t.form[g]={value:w,encoding:h[g]||{}}})}else if(typeof n=="string"){var p,m;const h=(p=(m=l.content[i])===null||m===void 0?void 0:m.encoding)!==null&&p!==void 0?p:{};try{t.form={};const g=JSON.parse(n);Object.entries(g).forEach(([w,O])=>{t.form[w]={value:O,encoding:h[w]||{}}})}catch{t.form=n}}else t.form=n;else t.body=n}else t.body=n;return t}function ks({request:e,securities:t={},operation:r={},spec:n}){var s;const o={...e},{authorized:a={}}=t,i=r.security||n.security||[],l=a&&!!Object.keys(a).length,c=(n==null||(s=n.components)===null||s===void 0?void 0:s.securitySchemes)||{};return o.headers=o.headers||{},o.query=o.query||{},!Object.keys(t).length||!l||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=a[d],p=c[d];if(!f)return;const m=f.value||f,{type:h}=p;if(f){if(h==="apiKey")p.in==="query"&&(o.query[p.name]=m),p.in==="header"&&(o.headers[p.name]=m),p.in==="cookie"&&(o.cookies[p.name]=m);else if(h==="http"){if(/^basic$/i.test(p.scheme)){const g=m.username||"",w=m.password||"",O=Gt(`${g}:${w}`);o.headers.Authorization=`Basic ${O}`}/^bearer$/i.test(p.scheme)&&(o.headers.Authorization=`Bearer ${m}`)}else if(h==="oauth2"||h==="openIdConnect"){const g=f.token||{},w=p["x-tokenName"]||"access_token",O=g[w];let x=g.token_type;(!x||x.toLowerCase()==="bearer")&&(x="Bearer"),o.headers.Authorization=`${x} ${O}`}}})}),o)}function Ds(e,t){const{spec:r,operation:n,securities:s,requestContentType:o,responseContentType:a,attachContentTypeForEmptyPayload:i}=e;if(t=Us({request:t,securities:s,operation:n,spec:r}),t.body||t.form||i)o?t.headers["Content-Type"]=o:Array.isArray(n.consumes)?[t.headers["Content-Type"]]=n.consumes:Array.isArray(r.consumes)?[t.headers["Content-Type"]]=r.consumes:n.parameters&&n.parameters.filter(l=>l.type==="file").length?t.headers["Content-Type"]="multipart/form-data":n.parameters&&n.parameters.filter(l=>l.in==="formData").length&&(t.headers["Content-Type"]="application/x-www-form-urlencoded");else if(o){const l=n.parameters&&n.parameters.filter(u=>u.in==="body").length>0,c=n.parameters&&n.parameters.filter(u=>u.in==="formData").length>0;(l||c)&&(t.headers["Content-Type"]=o)}return!a&&Array.isArray(n.produces)&&n.produces.length>0&&(t.headers.accept=n.produces.join(", ")),t}function Us({request:e,securities:t={},operation:r={},spec:n}){const s={...e},{authorized:o={},specSecurity:a=[]}=t,i=r.security||a,l=o&&!!Object.keys(o).length,c=n.securityDefinitions;return s.headers=s.headers||{},s.query=s.query||{},!Object.keys(t).length||!l||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=o[d];if(!f)return;const{token:p}=f,m=f.value||f,h=c[d],{type:g}=h,w=h["x-tokenName"]||"access_token",O=p&&p[w];let x=p&&p.token_type;if(f)if(g==="apiKey"){const T=h.in==="query"?"query":"headers";s[T]=s[T]||{},s[T][h.name]=m}else if(g==="basic")if(m.header)s.headers.authorization=m.header;else{const T=m.username||"",j=m.password||"";m.base64=Gt(`${T}:${j}`),s.headers.authorization=`Basic ${m.base64}`}else g==="oauth2"&&O&&(x=!x||x.toLowerCase()==="bearer"?"Bearer":x,s.headers.authorization=`${x} ${O}`)})}),s)}function Ns(e,t,r){if(!e||typeof e!="object"||!e.paths||typeof e.paths!="object")return null;const{paths:n}=e;for(const s in n)for(const o in n[s]){if(o.toUpperCase()==="PARAMETERS")continue;const a=n[s][o];if(!a||typeof a!="object")continue;const i={spec:e,pathName:s,method:o.toUpperCase(),operation:a};if(t(i))return i}}function Fs(e,t){return Ns(e,t)||null}function Yt(e,t){return`${t.toLowerCase()}-${e}`}function Bs(e,t){return!e||!e.paths?null:Fs(e,({pathName:r,method:n,operation:s})=>{if(!s||typeof s!="object")return!1;const o=s.operationId,a=Ye(s,r,n),i=Yt(r,n);return[a,i,o].some(l=>l&&l===t)})}const yt=e=>Array.isArray(e)?e:[],de=e=>{try{return new URL(e)}catch{const t=new URL(e,he),r=String(e).startsWith("/")?t.pathname:t.pathname.substring(1);return{hash:t.hash,host:"",hostname:"",href:"",origin:"",password:"",pathname:r,port:"",protocol:"",search:t.search,searchParams:t.searchParams}}};class zs extends We{}const Vs=(e,t)=>t.filter(r=>r.name===e),Ls=e=>{const t={};e.forEach(n=>{t[n.in]||(t[n.in]={}),t[n.in][n.name]=n});const r=[];return Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(s=>{r.push(t[n][s])})}),r},Hs={buildRequest:Js};function po({http:e,fetch:t,spec:r,operationId:n,pathName:s,method:o,parameters:a,securities:i,...l}){const c=e||t||me;s&&o&&!n&&(n=Yt(s,o));const u=Hs.buildRequest({spec:r,operationId:n,parameters:a,securities:i,http:c,...l});return u.body&&(Ot(u.body)||Array.isArray(u.body))&&(u.body=JSON.stringify(u.body)),c(u)}function Js(e){const{spec:t,operationId:r,responseContentType:n,scheme:s,requestInterceptor:o,responseInterceptor:a,contextUrl:i,userFetch:l,server:c,serverVariables:u,http:d,signal:f}=e;let{parameters:p,parameterBuilders:m}=e;const h=Wt(t);m||(h?m=js:m=vs);let w={url:"",credentials:d&&d.withCredentials?"include":"same-origin",headers:{},cookies:{}};f&&(w.signal=f),o&&(w.requestInterceptor=o),a&&(w.responseInterceptor=a),l&&(w.userFetch=l);const O=Bs(t,r);if(!O)throw new zs(`Operation ${r} not found`);const{operation:x={},method:T,pathName:j}=O,b=Ws({spec:t,scheme:s,contextUrl:i,server:c,serverVariables:u,pathName:j,method:T});if(w.url+=b,!r)return delete w.cookies,w;w.url+=j,w.method=`${T}`.toUpperCase(),p=p||{};const R=t.paths[j]||{};n&&(w.headers.accept=n);const E=Ls([].concat(yt(x.parameters)).concat(yt(R.parameters)));E.forEach(P=>{const C=m[P.in];let v;if(P.in==="body"&&P.schema&&P.schema.properties&&(v=p),v=P&&P.name&&p[P.name],typeof v>"u"?v=P&&P.name&&p[`${P.in}.${P.name}`]:Vs(P.name,E).length>1&&console.warn(`Parameter '${P.name}' is ambiguous because the defined spec has more than one parameter with the name: '${P.name}' and the passed-in parameter values did not define an 'in' value.`),v!==null){if(typeof P.default<"u"&&typeof v>"u"&&(v=P.default),typeof v>"u"&&P.required&&!P.allowEmptyValue)throw new Error(`Required parameter ${P.name} is not provided`);if(h&&P.schema&&P.schema.type==="object"&&typeof v=="string")try{v=JSON.parse(v)}catch{throw new Error("Could not parse object parameter value string as JSON")}C&&C({req:w,parameter:P,value:v,operation:x,spec:t,baseURL:b})}});const y={...e,operation:x};if(h?w=$s(y,w):w=Ds(y,w),w.cookies&&Object.keys(w.cookies).length){const P=Object.keys(w.cookies).reduce((C,v)=>{const $=w.cookies[v],F=C?"&":"",Oe=Nr.serialize(v,$);return C+F+Oe},"");w.headers.Cookie=P}return w.cookies&&delete w.cookies,Ze(w)}const Je=e=>e?e.replace(/\W/g,""):null;function Ws(e){return Wt(e.spec)?Ks(e):Qs(e)}const Ie=e=>Array.isArray(e)&&e.length>0;function Ks({spec:e,pathName:t,method:r,server:n,contextUrl:s,serverVariables:o={}}){var a,i;let l=[],c="",u;const d=e==null||(a=e.paths)===null||a===void 0||(a=a[t])===null||a===void 0||(a=a[(r||"").toLowerCase()])===null||a===void 0?void 0:a.servers,f=e==null||(i=e.paths)===null||i===void 0||(i=i[t])===null||i===void 0?void 0:i.servers,p=e==null?void 0:e.servers;return l=Ie(d)?d:Ie(f)?f:Ie(p)?p:[fn],n&&(u=l.find(m=>m.url===n),u&&(c=n)),c||([u]=l,c=u.url),c.includes("{")&&Ys(c).forEach(h=>{if(u.variables&&u.variables[h]){const g=u.variables[h],w=o[h]||g.default,O=new RegExp(`{${Fr(h)}}`,"g");c=c.replace(O,w)}}),Gs(c,s)}function Gs(e="",t=""){const r=de(e&&t?U(t,e):e),n=de(t),s=Je(r.protocol)||Je(n.protocol),o=r.host||n.host,a=r.pathname;let i;return s&&o?i=`${s}://${o+a}`:i=a,i[i.length-1]==="/"?i.slice(0,-1):i}function Ys(e){const t=Ur(e).call(e,/\{([^{}]+)}|([^{}]+)/g);return Array.from(t,([,r])=>r).filter(Boolean)}function Qs({spec:e,scheme:t,contextUrl:r=""}){const n=de(r),s=Array.isArray(e.schemes)?e.schemes[0]:null,o=t||s||Je(n.protocol)||"http",a=e.host||n.host||"",i=e.basePath||"";let l;return o&&a?l=`${o}://${a+i}`:l=i,l[l.length-1]==="/"?l.slice(0,-1):l}const Xs=async(e,t,r={})=>{const{returnEntireTree:n,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:l,useCircularStructures:c,strategies:u}=r,d={spec:e,pathDiscriminator:t,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:l,useCircularStructures:c,strategies:u},p=u.find(h=>h.match(d)).normalize(d),m=await bs({...d,spec:p,allowMetaPatches:!0,skipNormalization:!0});return!n&&Array.isArray(t)&&t.length&&(m.spec=t.reduce((h,g)=>h==null?void 0:h[g],m.spec)||null),m},ho=e=>async(t,r,n={})=>{const s={...e,...n};return Xs(t,r,s)};export{qn as a,fo as b,Js as c,uo as d,po as e,ho as f,Yn as g,me as h,Ye as i,ws as m,Zn as o,Gn as s};
